# Harris Corner Detector :
***
 - 해리스 특징 검출기는 영상에 있는 코너 개념을 정의하기 위해 추정되는 관심점 주변의 작은 윈도우(지역) 에서 방형성 명도의 평균 변화를 살펴본다. 평균 변화는 R ~= sum(I(이웃점) - I(현재위치))^2 로 정의

- 따라서 고려된 화소 주변의 이웃을 정의 후, 모든 가능한 방향에서 이 평균 명도 변화를 계산하여 한 방향 이상에서 평균 변화가 높은 점을 코너 정의로 이끈다.

- 먼저 최대 평균 명도 변화의 방향을 얻은 후에 직교방향에서도 평균 명도 변화가 높은지 확인한다. ==> 이러면 코너를 갖는다.

- 변화는 역시 미분으로 계산하며, 이때 변화율을 보는 것이 아니라, 어떤 변화인지를 보는 것이므로 2차 미분을 한다.
but 계산이 복잡하니 테일러 정리를 이용한다. 또한, x,y 모든 방향을 고려하는 것이므로 2차 미분 공분산행렬로 해야겠징?

- 계산된 공분산행렬을 고유치분해를 하면 고윳값이 나오는데 두 고윳값?은 최대 평균 명도 변화와 직교 방향에 대한 평균 명도 변화를 제공함을 보여준다.???

- 두 고윳값이 낮으면 상대적으로 동질 영역에 있고, 두 고윳값이 높다면 코너 위치에 있다. -> 그만큼 변화가 큰 영역에 있다는 소리겠징?

- so that, 점을 코너로 받아들여야 하는 조건은 주어진 경계값보다 더 높은 점에서 공분산행렬의 가장 작은 고윳값을 가져야 한다!!!! 큰 고윳값이 아니공???

- 이런 해리스 코너 알고리즘은 명시적으로 고윳값을 계산해야할 것 같지만 비용이 만만치 않으니 고유치분해 이론의 일부 속성을 이용한다.
1. (공분산)행렬의 모든 고윳값을 곱한 값은 행렬식과 같다.
2. 행렬의 모든 고윳값을 합한 값은 행렬의 대각선을 더한 값과 같다.(행렬의 대각합)

그러면 다음과 같이 점수로 계산해 행렬의 고윳값이 높은지 확인할 수 있다. Det(C) - kTrace^2(C)

- 각 화소 위치에서 cornerHarris 함수로 이 점수를 계산한다. kTrace의 k값은 cornerHarris의 5번째 파라미터 k는 일반적으로 0.05 ~ 0.5가 적당

- 이후 검출된 결과를 중복을 피하기위해 개선시키기 위해 비최대점 억제를 한다. 이 과정은 여러 점에 인접한 해리스 코너를 제외하는 것이다.
따라서 수용하려면 해리스 코너는 지정된 경계 값보다 더 높아야 할 뿐만 아니라 지역 최대치가 되어야 한다. 그래서 dilate를 이용해 팽창 영상으로 compare하여 localMax를 쳐낸다.
> 참고 : [다크 프로그래머](http://darkpgmr.tistory.com/131)

## Reference
***
### Mathematics
> 출처 : [다크 프로그래머](http://darkpgmr.tistory.com/105)

- Eigenvalue & Eigenvector

  - 고유치분해의 기하학적 의미 :</br>
    행렬 A의 고유벡터(v) -> 선형변환 A에 의해 방향은 보존되고 스케일만 변화되는 방향벡터</br>
    행렬 A의 고유값(λ) -> 고유벡터의 변화되는 스케일 정도</br>
    ==> 행렬 A의 성분에서 방향과 크기를 분리

  - Eigendecomposition</br>
    이러한 고유치분해를 하는 이유는 행렬 A의 대각화 분리가 가능하다는 점에서 이점이 있다.</br>
    고유치분해 후 행렬 A는 다음과 같다.</br>
    ```
    Av = λv
    ```
    이때, λ는 대각행렬이므로 행렬곱을 했을때 행에 상수배밖에 되지 않는다.</br>
    따라서, 행렬 A의 고유벡터들을 열벡터로 하는 행렬 P / 고유값들을 대각원소로 하는 대각행렬 Λ 는 다음과 같이 표현된다.
    ```
    AP = PΛ
    A = PΛP-1
    ```
    대각화를 하는 이유는 행렬식, 거듭제곱, 역행렬, 대각합 등을 손쉽게 연산할 수 있기 때문이다.

  - 고유치분해 가능조건 : 일차독립</br>
    **nxn 정방행렬 A가 고유치분해가 가능하려면 행렬 A가 n개의 일차독립인 고유벡터를 가져야한다.**</br>
    </br>
    **일차독립** 이란, 어떤 벡터들의 집합{v1, ..., vn}이 있을 때, 이들 벡터들 중 어느 한 벡터도 다른 벡터들의
    일차결합으로 표현될 수 없으면 이 벡터들을 서로 일차독립이라고 정의한다.</br>
    ->> n차원 공간은 최대 n개의 일차독립인 벡터들을 가질 수 있으며, n개의 일차독립인 벡터들은 이 공간을
    생성하는 **기저(basis)** 역할을 수행
